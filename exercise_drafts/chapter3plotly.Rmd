
--- type:NormalExercise lang:r xp:100 skills:1 key:10414fc9d1
## More dimensions with Plotly!

In the last exercise you created a scatter plot with the two linear discrimants that the LDA model generates. If the target variable in the model has $n$ categories, then LDA  will produce $n-1$ linear discriminants. In our `crime`target, we had 4 classes so the model has 3 linear discriminants (LD1, LD2 and LD3).

[Plotly](https://plot.ly/r/) is an R graphing library that creates **interactive** plots (and has an ggplot2 integration as well). In Plotly it is possible to create a 3D plot. Let's try it out and visualize our linear discriminants a bit more!

*** =instructions
- Access plotly
- Execute the code for the `plot_ly()` plot
- Adjust the code: add argument `color` as a function argument. Set the color to be the crime classes of the train set.
- Note that you can pan and zoom the plot! Cool!


*** =hint
- You can access the crime classes of the train data with `train$crime`

*** =pre_exercise_code
```{r}
library(MASS)
boston_scaled <- read.table("http://s3.amazonaws.com/assets.datacamp.com/production/course_2218/datasets/boston_scaled.txt", sep  =",", header = T)

ind <- sample(nrow(boston_scaled),  size = nrow(boston_scaled) * 0.8)
train <- boston_scaled[ind,]
test <- boston_scaled[-ind,]
correct_classes <- test$crime
test <- dplyr::select(test, -crime)

lda.fit = lda(crime ~ ., data=train)
model_predictors <- dplyr::select(train, -crime)
matrix_product <- as.matrix(model_predictors) %*% lda.fit$scaling
matrix_product <- as.data.frame(matrix_product)

```

*** =sample_code
```{r}
# train, abd lda.fit are available

# otetaanko mukaan? nämä pitäis selittää
model_predictors <- dplyr::select(train, -crime)
matrix_product <- as.matrix(model_predictors) %*% lda.fit$scaling
matrix_product <- as.data.frame(matrix_product)

# access plotly
library(plotly)

# plotly plot
plot_ly(x = matrix_product$LD1, y = matrix_product$LD2, z = matrix_product$LD3, type= 'scatter3d', mode='markers')

```

*** =solution
```{r}
# train, lda.fit and matrix_product are available

# create the standardized 
model_predictors <- dplyr::select(train, -crime)
matrix_product <- as.matrix(model_predictors) %*% lda.fit$scaling
matrix_product <- as.data.frame(matrix_product)

# access plotly
library(plotly)

# plotly plot
plot_ly(x = matrix_product$LD1, y = matrix_product$LD2, z = matrix_product$LD3, type =  'scatter3d', mode = 'markers', color = train$crime)

```

*** =sct
```{r}
test_function("plot_ly", args = "color",incorrect_msg = "Did you set the color correctly in plot_ly()?")
test_error()
success_msg("Plot_ting like no tomorrow!")
```

