5+5
install.packages("knitr")
install.packages("ggplot2")
install.packages("scatter3d")
install.packages("scatterplot3d")
install.packages("ggfortify")
library(ggfortify)
?autoplot
lm_fit <- lm(attitude~points, data = learning2014)
learning2014 <-  read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/learning2014.txt", sep = "\t", header = TRUE)
learning2014 <- learning2014[learning2014$points > 0,]
lm_fit <- lm(attitude~points, data = learning2014)
lm_fit <- lm(attitude~points, data = learning2014)
autoplot(lm_fit, which = c(1,2,5), smooth.linetype = "none")
lm_fit <- lm(attitude~points, data = learning2014)
autoplot(lm_fit, which = c(1,2,5), smooth.linetype = NULL)
lm_fit <- lm(attitude~points, data = learning2014)
autoplot(lm_fit, which = c(1,2,5), smooth.linetype = "blank")
?geom_smooth
install.packages("broom")
setwd("C:/Users/Tuomo/Dropbox/GitHub/Helsinki-Open-Data-Science/exercise_drafts")
# 1 loading more datasets
# meta:
browseURL("https://archive.ics.uci.edu/ml/datasets/STUDENT+ALCOHOL+CONSUMPTION")
# read the math class questionaire data
math <- read.table("../datasets/student-mat.csv",sep=";",header=TRUE)
# look at the column names
colnames(math)
# read the portuguese class questionaire data
por <- read.table("../datasets/student-por.csv",sep=";",header=TRUE)
# look at the column names
colnames(por)
# 2 joining two datasets
# common columns to merge the datasets by
join_by <- c("school","sex","age","address","famsize","Pstatus","Medu","Fedu","Mjob","Fjob","reason","nursery","internet")
# access the dplyr library
library(dplyr)
# join the two datasets by selected common variables
math_por <- inner_join(math, por, by = join_by, suffix = c(".math", ".por"))
# see the new column names
colnames(math_por)
# 3 glimpse at the joined dataset
# access the dplyr library
library(dplyr)
# glimpse at the new data
glimpse(math_por)
# 4 Transforming by looping
join_by <- c("school","sex","age","address","famsize","Pstatus","Medu","Fedu","Mjob","Fjob","reason","nursery","internet")
# which columns in the datasets were not used for joining the data
notjoined_columns <- colnames(math)[!colnames(math) %in% join_by]
# create a new data frame with the common columns
alc <- select(math_por, one_of(join_by))
# access the dplyr library
library(dplyr)
# average/combine the rest of the columns
for(column_name in notjoined_columns) {
df <- select(math_por, starts_with(column_name))
if(is.numeric(select(df, 1))) {
alc[column_name] <- rowMeans(df)
} else {
alc[column_name] <- select(df, 1)
}
}
# 5 Binarizing a variable
library(dplyr)
library(ggplot2)
# glimpse at the data
glimpse(alc)
# combine weekday and weekend alcohol use into alc_use
alc <- mutate(alc, alc_use = (Dalc + Walc) / 2)
# draw a histogram
qplot(alc_use, data = alc, bins = 10)
# transform alc_use into a binary (T, F) variable high_use
alc$high_use <- alc$alc_use > 2
# draw a bar plot
qplot(high_use, data = alc)
write.table(file = "../datasets/alc.txt", alc, sep = ",", row.names = F)
# 6 exploring relationships with cross tables
library(descr)
crosstab(alc$sex, alc$high_use, prop.c = T, prop.r = T)
crosstab(alc$age, alc$high_use, prop.c = T, prop.r = T)
# Logistic regression
# -------------------
# 7 fitting a logistic regression model
m1 <- glm(high_use ~ sex + age, data = alc, family = binomial)
summary(m1)
# 7
source("chapter2_studentalc_logreg.R")
source("chapter2_studentalc_logreg.R")
tr(alc)
str(alc)
sapply(alc, is.numeric)
is_numeric_column <- sapply(alc, is.numeric)
alc_numerics <- select(alc, which(is_numeric_column))
str(alc_numerics)
sapply(alc, class)
qplot(G3, data = alc)
qplot(G3, data = alc, bins = 10)
knitr::opts_chunk$set(echo = TRUE, message = FALSE)
qplot(alc_use, data = alc, bins = 10, main = "Student alcohol consupmtion")
qplot(G3, data = alc, bins = 10, main = "Student final grades")
